# multi_segment.yml - Demonstrates segment chaining with connections

include:
  - "base/defaults.yml"

params:
  project_name: "Multi-Segment Chain"
  version: "1.0"
  created: "2026-01-27"

  out_dir: "${ENV:HOME}/Documents/Temp/FreeCAD"
  cuts_file: "cutting_list_multi.txt"
  place_file: "placement_list_multi.txt"
  trace_file: "build_trace.log"

  cylinder_diameter: 1.75
  wafer_min_height: 0.5
  wafer_max_chord: 0.25

metadata:
  project_name: "${project_name}"
  version: "${version}"
  created: "${created}"
  description: "Multi-segment chain: linear base, helical turn, linear exit"

output_files:
  working_directory: "${out_dir}"
  cuts_file: "${cuts_file}"
  place_file: "${place_file}"
  trace_file: "${trace_file}"

workflow:
  - operation: "remove_objects"
    description: "Clean up any existing objects"

  - operation: "build_segment"
    segment_type: "curve_follower"
    name: "base_column"
    description: "Vertical base column"
    curve_spec:
      type: "linear"
      parameters:
        length: 5.0
        points: 10
    wafer_settings:
      cylinder_diameter: "${cylinder_diameter}"
      min_height: "${wafer_min_height}"
      max_chord: "${wafer_max_chord}"
    segment_settings:
      show_lcs: false
      build_segment: true
      rotate_segment: 0.0
      add_curve_vertices: false

  - operation: "build_segment"
    segment_type: "curve_follower"
    name: "curve_turn"
    description: "Quarter-turn helix"
    curve_spec:
      type: "helical"
      parameters:
        radius: 6.0
        pitch: 3.0
        turns: 1.0
        points: 80
      segment:
        start_fraction: 0.0
        end_fraction: 0.25
    wafer_settings:
      cylinder_diameter: "${cylinder_diameter}"
      min_height: "${wafer_min_height}"
      max_chord: 0.2
    segment_settings:
      show_lcs: false
      build_segment: true
      rotate_segment: 0.0
      add_curve_vertices: false

  - operation: "build_segment"
    segment_type: "curve_follower"
    name: "exit_arm"
    description: "Straight exit arm"
    curve_spec:
      type: "linear"
      parameters:
        length: 4.0
        points: 10
    wafer_settings:
      cylinder_diameter: "${cylinder_diameter}"
      min_height: "${wafer_min_height}"
      max_chord: "${wafer_max_chord}"
    segment_settings:
      show_lcs: false
      build_segment: true
      rotate_segment: 0.0
      add_curve_vertices: false
