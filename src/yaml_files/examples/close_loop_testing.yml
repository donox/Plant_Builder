  # Plant Builder Project Configuration
# This file defines the workflow and construction parameters for building segments

metadata:
  project_name: "Question Shaped Element for Cutting"
  version: "1.0"
  created: "2025-07-27"
  description: "Test project demonstrating helical curve following with wafers"

# Global settings that apply to all operations
global_settings:
  remove_existing: true
  relocate_segments: true
  workflow_mode: first_pass
  print_cuts: true
  print_place: true
  show_lcs: true
  temp_file: "temp_construction.dat"

# Output file settings
output_files:
  working_directory: "/home/don/Documents/Temp/FreeCAD/"
  cuts_file: "cutting_list.txt"
  place_file: "placement_list.txt"
  trace_file: "build_trace.log"

# Workflow definition - operations executed in order
workflow:
  - operation: "remove_objects"
    description: "Clean up any existing objects"
    keep_patterns:
#      - "*_base_0x"

#  - operation: "set_position"
#    description: "Set starting position and orientation"
#    position: [0, 0, 0]          # x, y, z coordinates
#    rotation: [0, 0, 0]          # roll, pitch, yaw in degrees (optional)

  - operation: "build_segment"
    segment_type: "curve_follower"
    name: "base"
    description: "Vertical base column"
    curve_spec:
      type: "linear"
      parameters:
        length: 5.0
        points: 10
    wafer_settings:
      cylinder_diameter: 2.25
      min_height: 1.0
      max_chord: 0.3
    segment_settings:
      show_lcs: true
      build_segment: true
      rotate_segment: 0.0
      add_curve_vertices: false      # This is displaying improperly (though calculations appear correct)

  - operation: "build_segment"
    segment_type: "curve_follower"
    name: "Curve Left"
    description: "Turn away from center 45 degrees"
    curve_spec:
      type: "circle"
      parameters:
        radius: 8.0        # Match the traditional helix
        points: 100
      segment:
        start_fraction: 0.0
        end_fraction: 0.25
    connection:
      rotation_angle: 180
    wafer_settings:
      cylinder_diameter: 2.25
      min_height: 0.5          # Much smaller
      max_chord: 0.1            # Much tighter
    segment_settings:
      show_lcs: true
      build_segment: true
      rotate_segment: 0.0
      add_curve_vertices: true

  - operation: "build_segment"
    segment_type: "curve_follower"
    name: "Curve Right"
    description: "Turn toward center 135 degrees"
    curve_spec:
      type: "circle"
      parameters:
        radius: 8.0
        points: 35
      segment:
        start_fraction: 0.0
        end_fraction: 0.48
    connection:
      rotation_angle: 0     # temp - step to manually make closing 'easier'
    wafer_settings:
      cylinder_diameter: 2.25
      min_height: 0.5          # Much smaller
      max_chord: 0.1            # Much tighter
    segment_settings:
      show_lcs: true
      build_segment: true
      rotate_segment: 0.0
      add_curve_vertices: true

#  - operation: "build_segment"
#    segment_type: "curve_follower"
#    name: "close_seg"
#    description: "Horizontal end column"
#    curve_spec:
#      type: "linear"
#      parameters:
#        length: 7.0
#        points: 10
#    wafer_settings:
#      cylinder_diameter: 2.25
#      min_height: 1.0
#      max_chord: 0.3
#      max_angular_span: 45
#    segment_settings:
#      show_lcs: true
#      build_segment: true
#      rotate_segment: 0.0
#      add_curve_vertices: false      # This is displaying improperly (though calculations appear correct)

#   REMOVE CLOSE LOOP WHILE CREATING REPLACEMENT
#  - operation: "close_loop"
#    wafer_settings:
#      cylinder_diameter: 2.25
#      reverse_tangent: true
#    segment_settings:
#      show_lcs: true

  - operation: build_segment
    segment_type: curve_follower
    name: FromExistingCurve
    description: Test segment driven from labeled curve
    curve_spec:
      type: existing_curve
      from_label: Spine_Curve_Left      # Label of an existing curve object in the doc
      num_samples: 100
    wafer_settings:
      cylinder_diameter: 2.25
      max_chord: 0.1
    segment_settings:
      show_lcs: true
      build_segment: true
      rotate_segment: 0.0

  - operation: export_curve
    name: FinalCurve
    description: Composite of base + Curve Left + Curve Right + close_seg
    segments:
      [base,
       Curve Left,
       Curve Right,
#       close_seg,
      FromExistingCurve]
    sampling:
      per_segment: 100

  - operation: "set_position"
    description: "Set starting position and orientation for final curve"
    position: [0, 0, 0]          # x, y, z coordinates

  - operation: build_segment
    segment_type: curve_follower
    name: FromFinalCurve
    description: Segment driven from exported FinalCurve
    curve_spec:
      type: existing_curve
      from_label: FinalCurve        # uses exported curve by label
      num_samples: 200
    wafer_settings:
      cylinder_diameter: 2.25
      max_chord: 0.1
    segment_settings:
      show_lcs: true
      build_segment: true
      rotate_segment: 0.0








