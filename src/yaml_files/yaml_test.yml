# Plant Builder Project Configuration
# This file defines the workflow and construction parameters for building segments

metadata:
  project_name: "Test Structures"
  version: "1.0"
  created: "2025-08-25"
  description: "Test project for debugging"

# Global settings that apply to all operations
global_settings:
  remove_existing: true
  relocate_segments: true
  print_cuts: true
  print_place: false
  show_lcs: true
  temp_file: "temp_construction.dat"

# Output file settings
output_files:
  working_directory: "/home/don/Documents/Temp/FreeCAD/"
  cuts_file: "cutting_list.txt"
  place_file: "placement_list.txt"
  trace_file: "build_trace.log"

# Workflow definition - operations executed in order
workflow:
  - operation: "remove_objects"
    description: "Clean up any existing objects"
    keep_patterns:
      - "testx_.*"
  - operation: "test_bezier_closing"
    description: "LCS Z-axis simulation - exact production scenario"
    use_explicit_points: true

    # End segment points derived from exit LCS Z-axis
    # LCS position: (0, -1.373, 29.844)
    # LCS Z-axis: (0, 0.991, 0.134)
    # Points trace backward along Z-axis to show incoming trajectory
    end_points:
      - [0.000000, -5.336927, 29.308010]
      - [0.000000, -3.354963, 29.576005]
      - [0.000000, -1.373000, 29.844000]

    # Start segment points derived from entry LCS Z-axis
    # LCS position: (0, 0, 0)
    # LCS Z-axis: (0, 0, 1.0)
    # Points trace forward along Z-axis to show outgoing trajectory
    start_points:
      - [0.000000, 0.000000, 0.000000]
      - [0.000000, 0.000000, 2.000000]
      - [0.000000, 0.000000, 4.000000]

    tension: 0.5
    cylinder_radius: 1.125

#  - operation: "set_position"
#    description: "Set starting position and orientation"
#    position: [10, 0, 0]          # x, y, z coordinates
#    rotation: [0, 45, 0]          # roll, pitch, yaw in degrees (optional)

#  - operation: "build_segment"
#    name: "test_circle"
#    description: "Build circular structure using curve follower"
#
#    # Curve specification using new Curves class
#    curve_spec:
#      type: "circle"
#      parameters:
#        radius: 8.0
#        points: 100
#      transformations:
#        - operation: "scale"
#          factor: 1.0
#        - operation: "rotate"
#          axis: "z"
#          angle: 0
#      segment:
#        start_fraction: 0.0
#        end_fraction: 0.75
#
#    # Wafer construction parameters
#    wafer_settings:
#      cylinder_diameter: 2.0
#      min_height: 0.8
#      max_chord: .3         # Need to relate to # points
#
#    # Segment control settings
#    segment_settings:
#      show_lcs: false
#      build_segment: true
#      rotate_segment: 0.0
#      add_curve_vertices: true
#
#  - operation: "build_segment"
#    segment_type: "curve_follower"
#    name: "test_helix_2"
#    description: "Build helical structure using curve follower"
#
#    curve_spec:
#      type: "helical"
#      parameters:
#        radius: 8.0        # Match the traditional helix
#        pitch: 8.0         # Larger pitch for better spacing
#        turns: .9        # Fewer turns
#        points: 120
#      transformations: [ ]   # Remove transformations for now
#
#    wafer_settings:
#      cylinder_diameter: 1.9    # Match traditional helix
#      min_height: 0.5           # Much smaller
#      max_chord: 0.2         # Much tighter
#
#    segment_settings:
#      show_lcs: false
#      build_segment: true
#      rotate_segment: 0.0
#      add_curve_vertices: true

# Alternative workflow configurations (can be selected)
workflows:
  simple_test:
    - operation: "build_segment"
      segment_type: "curve_follower"
      name: "simple_curve"
      curve_spec:
        type: "linear"
        parameters:
          length: 50.0
          points: 50
      wafer_settings:
        cylinder_diameter: 2.0
        min_height: 1.0
        max_chord: 0.3

  complex_knot:
    - operation: "build_segment"
      segment_type: "curve_follower"
      name: "overhand_knot"
      curve_spec:
        type: "overhand_knot"
        parameters:
          scale: 10.0
          points: 200
          increment: 1.0
        transformations:
          - operation: "rotate"
            axis: "x"
            angle: 45
      wafer_settings:
        cylinder_diameter: 1.5
        min_height: 0.8
        max_chord: 0.2

# Template definitions for reusable curve specifications
curve_templates:
  standard_helix:
    type: "helical"
    parameters:
      radius: 10.0
      pitch: 2.5
      turns: 4.0
      points: 100

  tight_helix:
    type: "helical"
    parameters:
      radius: 5.0
      pitch: 1.5
      turns: 6.0
      points: 150

  test_knot:
    type: "overhand_knot"
    parameters:
      scale: 8.0
      points: 180
      increment: 1.2